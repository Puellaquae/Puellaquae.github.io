<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Re: 从零开始的操作系统</title>
    <link rel="stylesheet" href="../css/luna.css" />
    <style>
        h2::before{
            content: '0x' attr(id) ': ';
        }
        h2:target::after{
            content: ' #';
            color: var(--myRed);
        }
    </style>
</head>

<body>
    <header class="header">
        <section sub="Experiment" class="navbar-left title">
            Puelloc
        </section>
        <section class="navbar-right">
            <a href="../index.html">首页</a>
            <a href="#">关于</a>
        </section>
    </header>
    <div class="container">
        <div class="archive">
            <a>从零开始的操作系统</a>
            <div class="modified date">
                2020/08/28
            </div>
            <div class="create date">
                2020/08/28
            </div>
            <div class="entry">
                <h2 id="0">准备</h2>
                <p>主要使用到的工具有：<br>
                    NASM，汇编编译器<br>
                    Bochs，调试用的虚拟机<br>
                    WinImage：用于制作软盘镜像文件<br>
                    Vmware，测试用的虚拟机</p>
                <p>参考资料：主要为《30 天自制操作系统》《x86 汇编语言——从实模式到保护模式》《Orange'S 一个操作系统的实现》这三本书。</p>
                <h2 id="1">Hello OS</h2>
                <p>这个操作系统用到的引导方式是传统的 BIOS ，使用的文件系统是 FAT12。</p>
                <p>开机自检后，BIOS 会将储存器的主引导扇区 MBR（0 面 0 道 1 扇区）的内容加载到内存 0x7c00 处。并检查是否为有效的引导扇区。一个有效的主引导扇区，其最后两字节应当是 0x55 和 0xAA。如果有效就 <code>jmp 0x0000:0x7c00</code> 继续执行。（根据 osdev 上的<a href="https://wiki.osdev.org/Boot_Sequence">描述</a>，部分 BIOS 会用 <code>jmp 0x07c0:0x0000</code> 指令，这会改变段寄存器的值。）</p>
                <p>此时只有 512 字节内容被加载到了内存里，所以这里 loader 我分了两个阶段，第一阶段的任务是将 loader 的余下部分加载到内存中运行，第二阶段负责系统的各项初始化，进入保护模式并加载运行系统内核。</p>
                <h2 id="2">loader 第一阶段</h2>
            </div>
        </div>
    </div>

    <div class="footer">
        <p rel="license"><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></p>
        <p rel="contact">
            <a href="mailto:shentukeqin@hotmail.com">Mail</a>
            <a href="https://github.com/Puellaquae">Github</a>
        </p>
    </div>
</body>

</html>